var subscribersApp=subscribersApp||{};subscribersApp.trackingUrl="https://hi.subscribers.com",subscribersApp.version="1.4.1",subscribersApp.subscribersSubscribeUrl="https://subscribe.subscribers.com/api/v1/subscriptions/subscribe",subscribersApp.notificationOptions=function(i){return i.data.data={},i.data.data.path=i.data.path,i.data},subscribersApp.notificationTitle=function(i){return i.data.title||"Notification"},subscribersApp.notificationUuid=function(i){if(i.uuid)return i.uuid;var t=/notifications\/([A-Za-z0-9\-]+)/i,r=i.path&&i.path.match(t);return r&&2===r.length?r[1]:void 0},subscribersApp.prepareData=function(i){return i.data.vendor_id=0,i.data.uuid=subscribersApp.notificationUuid(i.data),i},subscribersApp.displayNotification=function(i){return self.registration.showNotification(subscribersApp.notificationTitle(i),subscribersApp.notificationOptions(i))["catch"](function(i){subscribersApp.trackError("Error in displayNotification",i)})},subscribersApp.track=function(i){function t(i){var t=[];for(var r in i)i.hasOwnProperty(r)&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(i[r]));var s="&"+t.join("&");return"&"!==s?s:""}function r(i,r){var s=subscribersApp.trackingUrl,n=(new Date).getTime();return(s+="/"+i.join("/"))+"?v="+subscribersApp.version+"&t="+n+t(r)}var s=[].slice.call(arguments,1),n=s[s.length-1];n instanceof Object&&!(n instanceof Array)?s=s.slice(0,s.length-1):n=null;var e=[i].concat(s);return fetch(r(e,n),{mode:"no-cors"})["catch"](function(){"error"!==i&&subscribersApp.track("error","Error on sending event: "+i)})},subscribersApp.trackSubscriptionChange=function(){return subscribersApp.track("subscriptionchanged")},subscribersApp.trackReceived=function(i){var t=subscribersApp.notificationUuid({path:i});return subscribersApp.track("received",0,t)},subscribersApp.trackClicked=function(i,t){var r=subscribersApp.notificationUuid({path:i});return subscribersApp.track("clicked",0,r,{url:t})},subscribersApp.trackClosed=function(i){var t=subscribersApp.notificationUuid({path:i});return subscribersApp.track("closed",0,t)},self.addEventListener("pushsubscriptionchange",function(i){var t=new MessageChannel,r=clients.matchAll().then(function(i){var r=i[0];r&&r.postMessage({event:"pushsubscriptionchange",token:token},[t.port2])});i.waitUntil(Promise.all([r,subscribersApp.trackSubscriptionChange()]))}),self.addEventListener("push",function(i){var t=subscribersApp.prepareData(i.data.json());i.waitUntil(Promise.all([subscribersApp.displayNotification(t),subscribersApp.trackReceived(t.data.path)]))}),self.addEventListener("install",function(i){i.waitUntil(self.skipWaiting())}),self.addEventListener("activate",function(i){i.waitUntil(self.clients.claim())}),self.addEventListener("notificationclick",function(i){i.notification.close();var t=i.notification.data&&i.notification.data.path,r=i.notification.data&&i.notification.data.target_url,s=Promise.resolve();t&&(s=clients.openWindow(t)),i.waitUntil(Promise.all([s,subscribersApp.trackClicked(t,r)]))}),self.addEventListener("notificationclose",function(i){var t=i.notification.data.path;i.waitUntil(subscribersApp.trackClosed(t))});